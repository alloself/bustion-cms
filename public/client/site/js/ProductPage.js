import{m as ie,V as le,t as ue,s as re}from"./VAvatar.js";import{_ as ce}from"./_plugin-vue_export-helper.js";import{al as U,l as T,q as K,A as de,t as b,C as ve,D as fe,am as Q,b as L,h as y,s as B,w as I,p as me,v as k,_ as Z,a3 as he,x as s,Z as ge,K as ye,H as Ve,a4 as J,N as x,F as H,i as we,$ as Ce,n as _e,o as _,ad as P,P as g,S as X,ae as Ie,Q as Y,ai as W,c as A,R as F}from"./vuetify.js";import{a as Te,V as $,b as Be,c as xe,u as be}from"./VBtn.js";import{a as ke,b as N,c as S,V as Pe,d as j,e as z}from"./VRow.js";import{M as Se,a as Le,V as G}from"./VImg.js";const He=e=>{const{touchstartX:o,touchendX:t,touchstartY:n,touchendY:i}=e,l=.5,a=16;e.offsetX=t-o,e.offsetY=i-n,Math.abs(e.offsetY)<l*Math.abs(e.offsetX)&&(e.left&&t<o-a&&e.left(e),e.right&&t>o+a&&e.right(e)),Math.abs(e.offsetX)<l*Math.abs(e.offsetY)&&(e.up&&i<n-a&&e.up(e),e.down&&i>n+a&&e.down(e))};function $e(e,o){var n;const t=e.changedTouches[0];o.touchstartX=t.clientX,o.touchstartY=t.clientY,(n=o.start)==null||n.call(o,{originalEvent:e,...o})}function Ee(e,o){var n;const t=e.changedTouches[0];o.touchendX=t.clientX,o.touchendY=t.clientY,(n=o.end)==null||n.call(o,{originalEvent:e,...o}),He(o)}function De(e,o){var n;const t=e.changedTouches[0];o.touchmoveX=t.clientX,o.touchmoveY=t.clientY,(n=o.move)==null||n.call(o,{originalEvent:e,...o})}function Me(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:t=>$e(t,o),touchend:t=>Ee(t,o),touchmove:t=>De(t,o)}}function Re(e,o){var d;const t=o.value,n=t!=null&&t.parent?e.parentElement:e,i=(t==null?void 0:t.options)??{passive:!0},l=(d=o.instance)==null?void 0:d.$.uid;if(!n||!l)return;const a=Me(o.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[l]=a,U(a).forEach(u=>{n.addEventListener(u,a[u],i)})}function Xe(e,o){var l,a;const t=(l=o.value)!=null&&l.parent?e.parentElement:e,n=(a=o.instance)==null?void 0:a.$.uid;if(!(t!=null&&t._touchHandlers)||!n)return;const i=t._touchHandlers[n];U(i).forEach(d=>{t.removeEventListener(d,i[d])}),delete t._touchHandlers[n]}const p={mounted:Re,unmounted:Xe},ee=Symbol.for("vuetify:v-window"),te=Symbol.for("vuetify:v-window-group"),ne=T({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...K(),...ie(),...de()},"VWindow"),O=b()({name:"VWindow",directives:{Touch:p},props:ne(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:t}=o;const{themeClasses:n}=ve(e),{isRtl:i}=fe(),{t:l}=Q(),a=Te(e,te),d=L(),u=y(()=>i.value?!e.reverse:e.reverse),v=B(!1),w=y(()=>{const c=e.direction==="vertical"?"y":"x",V=(u.value?!v.value:v.value)?"-reverse":"";return`v-window-${c}${V}-transition`}),m=B(0),h=L(void 0),C=y(()=>a.items.value.findIndex(c=>a.selected.value.includes(c.id)));I(C,(c,f)=>{const V=a.items.value.length,R=V-1;V<=2?v.value=c<f:c===R&&f===0?v.value=!0:c===0&&f===R?v.value=!1:v.value=c<f}),me(ee,{transition:w,isReversed:v,transitionCount:m,transitionHeight:h,rootRef:d});const r=y(()=>e.continuous||C.value!==0),E=y(()=>e.continuous||C.value!==a.items.value.length-1);function D(){r.value&&a.prev()}function M(){E.value&&a.next()}const ae=y(()=>{const c=[],f={icon:i.value?e.nextIcon:e.prevIcon,class:`v-window__${u.value?"right":"left"}`,onClick:a.prev,ariaLabel:l("$vuetify.carousel.prev")};c.push(r.value?t.prev?t.prev({props:f}):s($,f,null):s("div",null,null));const V={icon:i.value?e.prevIcon:e.nextIcon,class:`v-window__${u.value?"left":"right"}`,onClick:a.next,ariaLabel:l("$vuetify.carousel.next")};return c.push(E.value?t.next?t.next({props:V}):s($,V,null):s("div",null,null)),c}),se=y(()=>e.touch===!1?e.touch:{...{left:()=>{u.value?D():M()},right:()=>{u.value?M():D()},start:f=>{let{originalEvent:V}=f;V.stopPropagation()}},...e.touch===!0?{}:e.touch});return k(()=>Z(s(e.tag,{ref:d,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},n.value,e.class],style:e.style},{default:()=>{var c,f;return[s("div",{class:"v-window__container",style:{height:h.value}},[(c=t.default)==null?void 0:c.call(t,{group:a}),e.showArrows!==!1&&s("div",{class:"v-window__controls"},[ae.value])]),(f=t.additional)==null?void 0:f.call(t,{group:a})]}}),[[he("touch"),se.value]])),{group:a}}}),Ye=T({color:String,cycle:Boolean,delimiterIcon:{type:ge,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...ne({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),We=b()({name:"VCarousel",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:t}=o;const n=ye(e,"modelValue"),{t:i}=Q(),l=L();let a=-1;I(n,u),I(()=>e.interval,u),I(()=>e.cycle,v=>{v?u():window.clearTimeout(a)}),Ve(d);function d(){!e.cycle||!l.value||(a=window.setTimeout(l.value.group.next,+e.interval>0?+e.interval:6e3))}function u(){window.clearTimeout(a),window.requestAnimationFrame(d)}return k(()=>{const[v]=O.filterProps(e);return s(O,x({ref:l},v,{modelValue:n.value,"onUpdate:modelValue":w=>n.value=w,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:H(e.height)},e.style]}),{default:t.default,additional:w=>{let{group:m}=w;return s(J,null,[!e.hideDelimiters&&s("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[m.items.value.length>0&&s(le,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[m.items.value.map((h,C)=>{const r={id:`carousel-item-${h.id}`,"aria-label":i("$vuetify.carousel.ariaLabel.delimiter",C+1,m.items.value.length),class:[m.isSelected(h.id)&&"v-btn--active"],onClick:()=>m.select(h.id,!0)};return t.item?t.item({props:r,item:h}):s($,x(h,r),null)})]})]),e.progress&&s(ue,{class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(m.getItemIndex(n.value)+1)/m.items.value.length*100},null)])},prev:t.prev,next:t.next})}),{}}}),Ae=T({eager:Boolean},"lazy");function Fe(e,o){const t=B(!1),n=y(()=>t.value||e.eager||o.value);I(o,()=>t.value=!0);function i(){e.eager||(t.value=!1)}return{isBooted:t,hasContent:n,onAfterLeave:i}}const oe=T({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...K(),...Be(),...Ae()},"VWindowItem"),q=b()({name:"VWindowItem",directives:{Touch:p},props:oe(),emits:{"group:selected":e=>!0},setup(e,o){let{slots:t}=o;const n=we(ee),i=xe(e,te),{isBooted:l}=be();if(!n||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=B(!1),d=y(()=>l.value&&(n.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function u(){!a.value||!n||(a.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function v(){var r;a.value||!n||(a.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=H((r=n.rootRef.value)==null?void 0:r.clientHeight)),n.transitionCount.value+=1)}function w(){u()}function m(r){a.value&&_e(()=>{!d.value||!a.value||!n||(n.transitionHeight.value=H(r.clientHeight))})}const h=y(()=>{const r=n.isReversed.value?e.reverseTransition:e.transition;return d.value?{name:typeof r!="string"?n.transition.value:r,onBeforeEnter:v,onAfterEnter:u,onEnterCancelled:w,onBeforeLeave:v,onAfterLeave:u,onLeaveCancelled:w,onEnter:m}:!1}),{hasContent:C}=Fe(e,i.isSelected);return k(()=>s(Se,{transition:h.value,disabled:!l.value},{default:()=>{var r;return[Z(s("div",{class:["v-window-item",i.selectedClass.value,e.class],style:e.style},[C.value&&((r=t.default)==null?void 0:r.call(t))]),[[Ce,i.isSelected.value]])]}})),{groupItem:i}}}),Ne=T({...Le(),...oe()},"VCarouselItem"),je=b()({name:"VCarouselItem",inheritAttrs:!1,props:Ne(),setup(e,o){let{slots:t,attrs:n}=o;k(()=>{const[i]=G.filterProps(e),[l]=q.filterProps(e);return s(q,x({class:"v-carousel-item"},l),{default:()=>[s(G,x(n,i),t)]})})}}),ze={data:()=>({item:{}}),computed:{carouselImages(){var o,t;return((t=(o=this.item)==null?void 0:o.images)==null?void 0:t.filter(({pivot:n})=>n.key==="carousel"))||[]}},async beforeMount(){try{const{data:e}=await re.get("/meal",{params:{slug:this.$route.params.productSlug}});this.item=e[0]}catch(e){console.log(e)}}},Ge={key:0,class:"mb-6"};function Oe(e,o,t,n,i,l){return _(),P("div",null,[l.carouselImages.length?(_(),P("div",Ge,[s(We,{"hide-delimiters":"",height:"450","show-arrows":l.carouselImages.length>1},{default:g(()=>[(_(!0),P(J,null,Ie(l.carouselImages,a=>(_(),A(je,{key:a.id,src:a.path,cover:"","reverse-transition":"fade-transition",transition:"fade-transition"},null,8,["src"]))),128))]),_:1},8,["show-arrows"])])):X("",!0),s(ke,null,{default:g(()=>[s(N,{class:"px-4"},{default:g(()=>[s(S,{cols:"6"},{default:g(()=>[Y("h1",null,W(e.item.title),1)]),_:1}),s(S,{cols:"6",class:"text-right"},{default:g(()=>[Y("h2",null,W(e.item.price)+" ₽",1)]),_:1})]),_:1}),e.item.description||e.item.nutritional?(_(),A(N,{key:0},{default:g(()=>[s(S,null,{default:g(()=>[s(Pe,{class:"mx-auto",outlined:""},{default:g(()=>[s(j,{class:"text-h5"},{default:g(()=>[F(" Описание: ")]),_:1}),s(z,{innerHTML:e.item.description},null,8,["innerHTML"]),s(j,{class:"text-h5"},{default:g(()=>[F(" Пищевая ценность: ")]),_:1}),s(z,{innerHTML:e.item.nutritional},null,8,["innerHTML"])]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1})])}const pe=ce(ze,[["render",Oe]]);export{pe as default};
