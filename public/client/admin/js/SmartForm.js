import{p as Un,m as Tn,am as Rn,g as Dn,an as zn,a5 as L,c as $n,d as vn,ao as Ln,ap as Fe,F as E,ad as A,aq as ce,a6 as mn,ar as Se,as as ue,ab as hn,at as Hn,au as Wn,e as yn,y as be,av as gn,aj as Gn,aw as B,E as Kn,a7 as qn,ax as Pe,ay as Be,o as ze,f as nn,w as tn,az as Yn,aA as Xn,aB as xn,a9 as Jn,aC as Qn,a8 as Zn}from"./index.js";import{c as et}from"./Login.js";import"./VRow.js";const nt=Un({...Tn(),...Rn()},"VForm"),tt=Dn()({name:"VForm",props:nt(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:a}=n;const i=zn(e),u=L();function c(d){d.preventDefault(),i.reset()}function v(d){const s=d,y=i.validate();s.then=y.then.bind(y),s.catch=y.catch.bind(y),s.finally=y.finally.bind(y),a("submit",s),s.defaultPrevented||y.then(h=>{var g;let{valid:b}=h;b&&((g=u.value)==null||g.submit())}),s.preventDefault()}return $n(()=>{var d;return vn("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:c,onSubmit:v},[(d=t.default)==null?void 0:d.call(t,i)])}),Ln(i,u)}});/**
  * vee-validate v4.11.8
  * (c) 2023 Abdelrahman Awad
  * @license MIT
  */function R(e){return typeof e=="function"}function pn(e){return e==null}const ve=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ye(e){return Number(e)>=0}function rt(e){const n=parseFloat(e);return isNaN(n)?e:n}function at(e){return typeof e=="object"&&e!==null}function lt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function it(e){if(!at(e)||lt(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function ke(e,n){return Object.keys(n).forEach(t=>{if(it(n[t])){e[t]||(e[t]={}),ke(e[t],n[t]);return}e[t]=n[t]}),e}function _e(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let a=1;a<n.length;a++){if(Ye(n[a])){t+=`[${n[a]}]`;continue}t+=`.${n[a]}`}return t}const ut={};function ot(e){return ut[e]}function rn(e,n,t){typeof t.value=="object"&&(t.value=I(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function I(e){if(typeof e!="object")return e;var n=0,t,a,i,u=Object.prototype.toString.call(e);if(u==="[object Object]"?i=Object.create(e.__proto__||null):u==="[object Array]"?i=Array(e.length):u==="[object Set]"?(i=new Set,e.forEach(function(c){i.add(I(c))})):u==="[object Map]"?(i=new Map,e.forEach(function(c,v){i.set(I(v),I(c))})):u==="[object Date]"?i=new Date(+e):u==="[object RegExp]"?i=new RegExp(e.source,e.flags):u==="[object DataView]"?i=new e.constructor(I(e.buffer)):u==="[object ArrayBuffer]"?i=e.slice(0):u.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)rn(i,a[n],Object.getOwnPropertyDescriptor(e,a[n]));for(n=0,a=Object.getOwnPropertyNames(e);n<a.length;n++)Object.hasOwnProperty.call(i,t=a[n])&&i[t]===e[t]||rn(i,t,Object.getOwnPropertyDescriptor(e,t))}return i||e}const Xe=Symbol("vee-validate-form"),st=Symbol("vee-validate-field-instance"),Ce=Symbol("Default empty value"),dt=typeof window<"u";function He(e){return R(e)&&!!e.__locatorRef}function oe(e){return!!e&&R(e.parse)&&e.__type==="VVTypedSchema"}function we(e){return!!e&&R(e.validate)}function Ae(e){return e==="checkbox"||e==="radio"}function ct(e){return ve(e)||Array.isArray(e)}function ft(e){return Array.isArray(e)?e.length===0:ve(e)&&Object.keys(e).length===0}function Ie(e){return/^\[.+\]$/i.test(e)}function vt(e){return bn(e)&&e.multiple}function bn(e){return e.tagName==="SELECT"}function mt(e,n){const t=![!1,null,void 0,0].includes(n.multiple)&&!Number.isNaN(n.multiple);return e==="select"&&"multiple"in n&&t}function ht(e,n){return!mt(e,n)&&n.type!=="file"&&!Ae(n.type)}function yt(e){return Vn(e)&&e.target&&"submit"in e.target}function Vn(e){return e?!!(typeof Event<"u"&&R(Event)&&e instanceof Event||e&&e.srcElement):!1}function an(e,n){return n in e&&e[n]!==Ce}function H(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,a,i;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(a=t;a--!==0;)if(!H(e[a],n[a]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(a of e.entries())if(!n.has(a[0]))return!1;for(a of e.entries())if(!H(a[1],n.get(a[0])))return!1;return!0}if(ln(e)&&ln(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(a of e.entries())if(!n.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(a=t;a--!==0;)if(e[a]!==n[a])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();for(i=Object.keys(e),t=i.length,a=t;a--!==0;){var u=i[a];if(!H(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}function ln(e){return dt?e instanceof File:!1}function xe(e){return Ie(e)?e.replace(/\[|\]/gi,""):e}function W(e,n,t){return e?Ie(n)?e[xe(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((i,u)=>ct(i)&&u in i?i[u]:t,e):t}function fe(e,n,t){if(Ie(n)){e[xe(n)]=t;return}const a=n.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let u=0;u<a.length;u++){if(u===a.length-1){i[a[u]]=t;return}(!(a[u]in i)||pn(i[a[u]]))&&(i[a[u]]=Ye(a[u+1])?[]:{}),i=i[a[u]]}}function $e(e,n){if(Array.isArray(e)&&Ye(n)){e.splice(Number(n),1);return}ve(e)&&delete e[n]}function un(e,n){if(Ie(n)){delete e[xe(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<t.length;u++){if(u===t.length-1){$e(a,t[u]);break}if(!(t[u]in a)||pn(a[t[u]]))break;a=a[t[u]]}const i=t.map((u,c)=>W(e,t.slice(0,c).join(".")));for(let u=i.length-1;u>=0;u--)if(ft(i[u])){if(u===0){$e(e,t[0]);continue}$e(i[u-1],t[u-1])}}function x(e){return Object.keys(e)}function On(e,n=void 0){const t=Be();return(t==null?void 0:t.provides[e])||Pe(e,n)}function on(e,n,t){if(Array.isArray(e)){const a=[...e],i=a.findIndex(u=>H(u,n));return i>=0?a.splice(i,1):a.push(n),a}return H(e,n)?t:n}function sn(e,n=0){let t=null,a=[];return function(...i){return t&&clearTimeout(t),t=setTimeout(()=>{const u=e(...i);a.forEach(c=>c(u)),a=[]},n),new Promise(u=>a.push(u))}}function gt(e,n){return ve(n)&&n.number?rt(e):e}function We(e,n){let t;return async function(...i){const u=e(...i);t=u;const c=await u;return u!==t||(t=void 0,n(c,i)),c}}function Ge(e){return Array.isArray(e)?e:e?[e]:[]}function Ve(e,n){const t={};for(const a in e)n.includes(a)||(t[a]=e[a]);return t}function pt(e){let n=null,t=[];return function(...a){const i=ce(()=>{if(n!==i)return;const u=e(...a);t.forEach(c=>c(u)),t=[],n=null});return n=i,new Promise(u=>t.push(u))}}function bt(e,n,t){return n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var a,i;return(i=(a=n.slots).default)===null||i===void 0?void 0:i.call(a,t())}}:n.slots.default}function Le(e){if(_n(e))return e._value}function _n(e){return"_value"in e}function Vt(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Me(e){if(!Vn(e))return e;const n=e.target;if(Ae(n.type)&&_n(n))return Le(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(vt(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Le);if(bn(n)){const t=Array.from(n.options).find(a=>a.selected);return t?Le(t):n.value}return Vt(n)}function Sn(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ve(e)&&e._$$isNormalized?e:ve(e)?Object.keys(e).reduce((t,a)=>{const i=Ot(e[a]);return e[a]!==!1&&(t[a]=dn(i)),t},n):typeof e!="string"?n:e.split("|").reduce((t,a)=>{const i=_t(a);return i.name&&(t[i.name]=dn(i.params)),t},n):n}function Ot(e){return e===!0?[]:Array.isArray(e)||ve(e)?e:[e]}function dn(e){const n=t=>typeof t=="string"&&t[0]==="@"?St(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,a)=>(t[a]=n(e[a]),t),{})}const _t=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function St(e){const n=t=>W(t,e)||t[e];return n.__locatorRef=e,n}function At(e){return Array.isArray(e)?e.filter(He):x(e).filter(n=>He(e[n])).map(n=>e[n])}const jt={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Ke=Object.assign({},jt);const ie=()=>Ke,Et=e=>{Ke=Object.assign(Object.assign({},Ke),e)},Pt=Et;async function An(e,n,t={}){const a=t==null?void 0:t.bails,i={name:(t==null?void 0:t.name)||"{field}",rules:n,label:t==null?void 0:t.label,bails:a??!0,formData:(t==null?void 0:t.values)||{}},c=(await Ft(i,e)).errors;return{errors:c,valid:!c.length}}async function Ft(e,n){if(oe(e.rules)||we(e.rules))return Ct(n,e.rules);if(R(e.rules)||Array.isArray(e.rules)){const c={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},v=Array.isArray(e.rules)?e.rules:[e.rules],d=v.length,s=[];for(let y=0;y<d;y++){const h=v[y],b=await h(n,c);if(!(typeof b!="string"&&!Array.isArray(b)&&b)){if(Array.isArray(b))s.push(...b);else{const w=typeof b=="string"?b:En(c);s.push(w)}if(e.bails)return{errors:s}}}return{errors:s}}const t=Object.assign(Object.assign({},e),{rules:Sn(e.rules)}),a=[],i=Object.keys(t.rules),u=i.length;for(let c=0;c<u;c++){const v=i[c],d=await wt(t,n,{name:v,params:t.rules[v]});if(d.error&&(a.push(d.error),e.bails))return{errors:a}}return{errors:a}}function kt(e){return!!e&&e.name==="ValidationError"}function jn(e){return{__type:"VVTypedSchema",async parse(t){var a;try{return{output:await e.validate(t,{abortEarly:!1}),errors:[]}}catch(i){if(!kt(i))throw i;if(!(!((a=i.inner)===null||a===void 0)&&a.length)&&i.errors.length)return{errors:[{path:i.path,errors:i.errors}]};const u=i.inner.reduce((c,v)=>{const d=v.path||"";return c[d]||(c[d]={errors:[],path:d}),c[d].errors.push(...v.errors),c},{});return{errors:Object.values(u)}}}}}async function Ct(e,n){const a=await(oe(n)?n:jn(n)).parse(e),i=[];for(const u of a.errors)u.errors.length&&i.push(...u.errors);return{errors:i}}async function wt(e,n,t){const a=ot(t.name);if(!a)throw new Error(`No such validator '${t.name}' exists.`);const i=Mt(t.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:i})},c=await a(n,i,u);return typeof c=="string"?{error:c}:{error:c?void 0:En(u)}}function En(e){const n=ie().generateMessage;return n?n(e):"Field is invalid"}function Mt(e,n){const t=a=>He(a)?a(n):a;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((a,i)=>(a[i]=t(e[i]),a),{})}async function Bt(e,n){const a=await(oe(e)?e:jn(e)).parse(I(n)),i={},u={};for(const c of a.errors){const v=c.errors,d=(c.path||"").replace(/\["(\d+)"\]/g,(s,y)=>`[${y}]`);i[d]={valid:!v.length,errors:v},v.length&&(u[d]=v[0])}return{valid:!a.errors.length,results:i,errors:u,values:a.value}}async function It(e,n,t){const i=x(e).map(async s=>{var y,h,b;const g=(y=t==null?void 0:t.names)===null||y===void 0?void 0:y[s],w=await An(W(n,s),e[s],{name:(g==null?void 0:g.name)||s,label:g==null?void 0:g.label,values:n,bails:(b=(h=t==null?void 0:t.bailsMap)===null||h===void 0?void 0:h[s])!==null&&b!==void 0?b:!0});return Object.assign(Object.assign({},w),{path:s})});let u=!0;const c=await Promise.all(i),v={},d={};for(const s of c)v[s.path]={valid:s.valid,errors:s.errors},s.valid||(u=!1,d[s.path]=s.errors[0]);return{valid:u,results:v,errors:d}}let cn=0;function Nt(e,n){const{value:t,initialValue:a,setInitialValue:i}=Ut(e,n.modelValue,n.form);if(!n.form){let d=function(g){var w;"value"in g&&(t.value=g.value),"errors"in g&&y(g.errors),"touched"in g&&(b.touched=(w=g.touched)!==null&&w!==void 0?w:b.touched),"initialValue"in g&&i(g.initialValue)};const{errors:s,setErrors:y}=Dt(),h=cn>=Number.MAX_SAFE_INTEGER?0:++cn,b=Rt(t,a,s);return{id:h,path:e,value:t,initialValue:a,meta:b,flags:{pendingUnmount:{[h]:!1},pendingReset:!1},errors:s,setState:d}}const u=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate}),c=E(()=>u.errors);function v(d){var s,y,h;"value"in d&&(t.value=d.value),"errors"in d&&((s=n.form)===null||s===void 0||s.setFieldError(A(e),d.errors)),"touched"in d&&((y=n.form)===null||y===void 0||y.setFieldTouched(A(e),(h=d.touched)!==null&&h!==void 0?h:!1)),"initialValue"in d&&i(d.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:t,errors:c,meta:u,initialValue:a,flags:u.__flags,setState:v}}function Ut(e,n,t){const a=L(A(n));function i(){return t?W(t.initialValues.value,A(e),A(a)):A(a)}function u(s){if(!t){a.value=s;return}t.stageInitialValue(A(e),s,!0)}const c=E(i);if(!t)return{value:L(i()),initialValue:c,setInitialValue:u};const v=Tt(n,t,c,e);return t.stageInitialValue(A(e),v,!0),{value:E({get(){return W(t.values,A(e))},set(s){t.setFieldValue(A(e),s,!1)}}),initialValue:c,setInitialValue:u}}function Tt(e,n,t,a){return Se(e)?A(e):e!==void 0?e:W(n.values,A(a),A(t))}function Rt(e,n,t){const a=Fe({touched:!1,pending:!1,valid:!0,validated:!!A(t).length,initialValue:E(()=>A(n)),dirty:E(()=>!H(A(e),A(n)))});return ue(t,i=>{a.valid=!i.length},{immediate:!0,flush:"sync"}),a}function Dt(){const e=L([]);return{errors:e,setErrors:n=>{e.value=Ge(n)}}}function zt(e,n,t){return Ae(t==null?void 0:t.type)?Lt(e,n,t):Pn(e,n,t)}function Pn(e,n,t){const{initialValue:a,validateOnMount:i,bails:u,type:c,checkedValue:v,label:d,validateOnValueUpdate:s,uncheckedValue:y,controlled:h,keepValueOnUnmount:b,syncVModel:g,form:w}=$t(t),q=h?On(Xe):void 0,_=w||q,G=E(()=>_e(B(e))),D=E(()=>{if(B(_==null?void 0:_.schema))return;const V=A(n);return we(V)||oe(V)||R(V)||Array.isArray(V)?V:Sn(V)}),{id:Y,value:Q,initialValue:Z,meta:N,setState:le,errors:U,flags:T}=Nt(G,{modelValue:a,form:_,bails:u,label:d,type:c,validate:D.value?X:void 0}),z=E(()=>U.value[0]);g&&Ht({value:Q,prop:g,handleChange:P,shouldValidate:()=>s&&!T.pendingReset});const ne=(m,V=!1)=>{N.touched=!0,V&&ee()};async function me(m){var V,F;return _!=null&&_.validateSchema?(V=(await _.validateSchema(m)).results[B(G)])!==null&&V!==void 0?V:{valid:!0,errors:[]}:D.value?An(Q.value,D.value,{name:B(G),label:B(d),values:(F=_==null?void 0:_.values)!==null&&F!==void 0?F:{},bails:u}):{valid:!0,errors:[]}}const ee=We(async()=>(N.pending=!0,N.validated=!0,me("validated-only")),m=>{if(!T.pendingUnmount[$.id])return le({errors:m.errors}),N.pending=!1,N.valid=m.valid,m}),J=We(async()=>me("silent"),m=>(N.valid=m.valid,m));function X(m){return(m==null?void 0:m.mode)==="silent"?J():ee()}function P(m,V=!0){const F=Me(m);ge(F,V)}mn(()=>{if(i)return ee();(!_||!_.validateSchema)&&J()});function Ne(m){N.touched=m}function he(m){var V;const F=m&&"value"in m?m.value:Z.value;le({value:I(F),initialValue:I(F),touched:(V=m==null?void 0:m.touched)!==null&&V!==void 0?V:!1,errors:(m==null?void 0:m.errors)||[]}),N.pending=!1,N.validated=!1,J()}const se=Be();function ge(m,V=!0){Q.value=se&&g?gt(m,se.props.modelModifiers):m,(V?ee:J)()}function je(m){le({errors:Array.isArray(m)?m:[m]})}const Je=E({get(){return Q.value},set(m){ge(m,s)}}),$={id:Y,name:G,label:d,value:Je,meta:N,errors:U,errorMessage:z,type:c,checkedValue:v,uncheckedValue:y,bails:u,keepValueOnUnmount:b,resetField:he,handleReset:()=>he(),validate:X,handleChange:P,handleBlur:ne,setState:le,setTouched:Ne,setErrors:je,setValue:ge};if(hn(st,$),Se(n)&&typeof A(n)!="function"&&ue(n,(m,V)=>{H(m,V)||(N.validated?ee():J())},{deep:!0}),!_)return $;const Ue=E(()=>{const m=D.value;return!m||R(m)||we(m)||oe(m)||Array.isArray(m)?{}:Object.keys(m).reduce((V,F)=>{const C=At(m[F]).map(te=>te.__locatorRef).reduce((te,re)=>{const ae=W(_.values,re)||_.values[re];return ae!==void 0&&(te[re]=ae),te},{});return Object.assign(V,C),V},{})});return ue(Ue,(m,V)=>{if(!Object.keys(m).length)return;!H(m,V)&&(N.validated?ee():J())}),qn(()=>{var m;const V=(m=B($.keepValueOnUnmount))!==null&&m!==void 0?m:B(_.keepValuesOnUnmount),F=B(G);if(V||!_||T.pendingUnmount[$.id]){_==null||_.removePathState(F,Y);return}T.pendingUnmount[$.id]=!0;const C=_.getPathState(F);if(Array.isArray(C==null?void 0:C.id)&&(C!=null&&C.multiple)?C!=null&&C.id.includes($.id):(C==null?void 0:C.id)===$.id){if(C!=null&&C.multiple&&Array.isArray(C.value)){const re=C.value.findIndex(ae=>H(ae,B($.checkedValue)));if(re>-1){const ae=[...C.value];ae.splice(re,1),_.setFieldValue(F,ae)}Array.isArray(C.id)&&C.id.splice(C.id.indexOf($.id),1)}else _.unsetPathValue(B(G));_.removePathState(F,Y)}}),$}function $t(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(e!=null&&e.syncVModel),a=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",i=t&&!("initialValue"in(e||{}))?qe(Be(),a):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:i});const u="valueProp"in e?e.valueProp:e.checkedValue,c="standalone"in e?!e.standalone:e.controlled,v=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:i,controlled:c??!0,checkedValue:u,syncVModel:v})}function Lt(e,n,t){const a=t!=null&&t.standalone?void 0:On(Xe),i=t==null?void 0:t.checkedValue,u=t==null?void 0:t.uncheckedValue;function c(v){const d=v.handleChange,s=E(()=>{const h=B(v.value),b=B(i);return Array.isArray(h)?h.findIndex(g=>H(g,b))>=0:H(b,h)});function y(h,b=!0){var g,w;if(s.value===((g=h==null?void 0:h.target)===null||g===void 0?void 0:g.checked)){b&&v.validate();return}const q=B(e),_=a==null?void 0:a.getPathState(q),G=Me(h);let D=(w=B(i))!==null&&w!==void 0?w:G;a&&(_!=null&&_.multiple)&&_.type==="checkbox"?D=on(W(a.values,q)||[],D,void 0):(t==null?void 0:t.type)==="checkbox"&&(D=on(B(v.value),D,B(u))),d(D,b)}return Object.assign(Object.assign({},v),{checked:s,checkedValue:i,uncheckedValue:u,handleChange:y})}return c(Pn(e,n,t))}function Ht({prop:e,value:n,handleChange:t,shouldValidate:a}){const i=Be();if(!i||!e)return;const u=typeof e=="string"?e:"modelValue",c=`update:${u}`;u in i.props&&(ue(n,v=>{H(v,qe(i,u))||i.emit(c,v)}),ue(()=>qe(i,u),v=>{if(v===Ce&&n.value===void 0)return;const d=v===Ce?void 0:v;H(d,n.value)||t(d,a())}))}function qe(e,n){if(e)return e.props[n]}const Wt=yn({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>ie().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Ce},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,n){const t=be(e,"rules"),a=be(e,"name"),i=be(e,"label"),u=be(e,"uncheckedValue"),c=be(e,"keepValue"),{errors:v,value:d,errorMessage:s,validate:y,handleChange:h,handleBlur:b,setTouched:g,resetField:w,handleReset:q,meta:_,checked:G,setErrors:D}=zt(a,t,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:n.attrs.type,initialValue:Kt(e,n),checkedValue:n.attrs.value,uncheckedValue:u,label:i,validateOnValueUpdate:e.validateOnModelUpdate,keepValueOnUnmount:c,syncVModel:!0}),Y=function(T,z=!0){h(T,z)},Q=E(()=>{const{validateOnInput:U,validateOnChange:T,validateOnBlur:z,validateOnModelUpdate:ne}=Gt(e);function me(P){b(P,z),R(n.attrs.onBlur)&&n.attrs.onBlur(P)}function ee(P){Y(P,U),R(n.attrs.onInput)&&n.attrs.onInput(P)}function J(P){Y(P,T),R(n.attrs.onChange)&&n.attrs.onChange(P)}const X={name:e.name,onBlur:me,onInput:ee,onChange:J};return X["onUpdate:modelValue"]=P=>Y(P,ne),X}),Z=E(()=>{const U=Object.assign({},Q.value);Ae(n.attrs.type)&&G&&(U.checked=G.value);const T=fn(e,n);return ht(T,n.attrs)&&(U.value=d.value),U}),N=E(()=>Object.assign(Object.assign({},Q.value),{modelValue:d.value}));function le(){return{field:Z.value,componentField:N.value,value:d.value,meta:_,errors:v.value,errorMessage:s.value,validate:y,resetField:w,handleChange:Y,handleInput:U=>Y(U,!1),handleReset:q,handleBlur:Q.value.onBlur,setTouched:g,setErrors:D}}return n.expose({setErrors:D,setTouched:g,reset:w,validate:y,handleChange:h}),()=>{const U=gn(fn(e,n)),T=bt(U,n,le);return U?Gn(U,Object.assign(Object.assign({},n.attrs),Z.value),T):T}}});function fn(e,n){let t=e.as||"";return!e.as&&!n.slots.default&&(t="input"),t}function Gt(e){var n,t,a,i;const{validateOnInput:u,validateOnChange:c,validateOnBlur:v,validateOnModelUpdate:d}=ie();return{validateOnInput:(n=e.validateOnInput)!==null&&n!==void 0?n:u,validateOnChange:(t=e.validateOnChange)!==null&&t!==void 0?t:c,validateOnBlur:(a=e.validateOnBlur)!==null&&a!==void 0?a:v,validateOnModelUpdate:(i=e.validateOnModelUpdate)!==null&&i!==void 0?i:d}}function Kt(e,n){return Ae(n.attrs.type)?an(e,"modelValue")?e.modelValue:void 0:an(e,"modelValue")?e.modelValue:n.attrs.value}const qt=Wt;let Yt=0;const Oe=["bails","fieldsCount","id","multiple","type","validate"];function Fn(e){const n=A(e==null?void 0:e.initialValues)||{},t=A(e==null?void 0:e.validationSchema);return t&&oe(t)&&R(t.cast)?I(t.cast(n)||{}):I(n)}function Xt(e){var n;const t=Yt++;let a=0;const i=L(!1),u=L(!1),c=L(0),v=[],d=Fe(Fn(e)),s=L([]),y=L({}),h=L({}),b=pt(()=>{h.value=s.value.reduce((l,r)=>(l[_e(B(r.path))]=r,l),{})});function g(l,r){const o=P(l);if(!o){typeof l=="string"&&(y.value[_e(l)]=Ge(r));return}if(typeof l=="string"){const f=_e(l);y.value[f]&&delete y.value[f]}o.errors=Ge(r),o.valid=!o.errors.length}function w(l){x(l).forEach(r=>{g(r,l[r])})}e!=null&&e.initialErrors&&w(e.initialErrors);const q=E(()=>{const l=s.value.reduce((r,o)=>(o.errors.length&&(r[o.path]=o.errors),r),{});return Object.assign(Object.assign({},y.value),l)}),_=E(()=>x(q.value).reduce((l,r)=>{const o=q.value[r];return o!=null&&o.length&&(l[r]=o[0]),l},{})),G=E(()=>s.value.reduce((l,r)=>(l[r.path]={name:r.path||"",label:r.label||""},l),{})),D=E(()=>s.value.reduce((l,r)=>{var o;return l[r.path]=(o=r.bails)!==null&&o!==void 0?o:!0,l},{})),Y=Object.assign({},(e==null?void 0:e.initialErrors)||{}),Q=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:Z,originalInitialValues:N,setInitialValues:le}=Jt(s,d,e),U=xt(s,d,N,_),T=E(()=>s.value.reduce((l,r)=>{const o=W(d,r.path);return fe(l,r.path,o),l},{})),z=e==null?void 0:e.validationSchema;function ne(l,r){var o,f;const p=E(()=>W(Z.value,B(l))),O=h.value[B(l)];if(O){((r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio")&&(O.multiple=!0);const K=a++;return Array.isArray(O.id)?O.id.push(K):O.id=[O.id,K],O.fieldsCount++,O.__flags.pendingUnmount[K]=!1,O}const S=E(()=>W(d,B(l))),M=B(l),j=a++,k=Fe({id:j,path:l,touched:!1,pending:!1,valid:!0,validated:!!(!((o=Y[M])===null||o===void 0)&&o.length),initialValue:p,errors:Kn([]),bails:(f=r==null?void 0:r.bails)!==null&&f!==void 0?f:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:S,multiple:!1,__flags:{pendingUnmount:{[j]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:E(()=>!H(A(S),A(p)))});return s.value.push(k),h.value[M]=k,b(),_.value[M]&&!Y[M]&&ce(()=>{de(M,{mode:"silent"})}),Se(l)&&ue(l,K=>{b();const pe=I(S.value);h.value[K]=k,ce(()=>{fe(d,K,pe)})}),k}const me=sn(en,5),ee=sn(en,5),J=We(async l=>await l==="silent"?me():ee(),(l,[r])=>{const o=x(V.errorBag.value);return[...new Set([...x(l.results),...s.value.map(p=>p.path),...o])].sort().reduce((p,O)=>{const S=O,M=P(S)||Ne(S),j=(l.results[S]||{errors:[]}).errors,k={errors:j,valid:!j.length};return p.results[S]=k,k.valid||(p.errors[S]=k.errors[0]),M&&y.value[S]&&delete y.value[S],M?(M.valid=k.valid,r==="silent"||r==="validated-only"&&!M.validated||g(M,k.errors),p):(g(S,j),p)},{valid:l.valid,results:{},errors:{}})});function X(l){s.value.forEach(l)}function P(l){const r=typeof l=="string"?_e(l):l;return typeof r=="string"?h.value[r]:r}function Ne(l){return s.value.filter(o=>l.startsWith(o.path)).reduce((o,f)=>o?f.path.length>o.path.length?f:o:f,void 0)}let he=[],se;function ge(l){return he.push(l),se||(se=ce(()=>{[...he].sort().reverse().forEach(o=>{un(d,o)}),he=[],se=null})),se}function je(l){return function(o,f){return function(O){return O instanceof Event&&(O.preventDefault(),O.stopPropagation()),X(S=>S.touched=!0),i.value=!0,c.value++,ye().then(S=>{const M=I(d);if(S.valid&&typeof o=="function"){const j=I(T.value);let k=l?j:M;return S.values&&(k=S.values),o(k,{evt:O,controlledValues:j,setErrors:w,setFieldError:g,setTouched:Te,setFieldTouched:Ee,setValues:te,setFieldValue:F,resetForm:Re,resetField:Qe})}!S.valid&&typeof f=="function"&&f({values:M,evt:O,errors:S.errors,results:S.results})}).then(S=>(i.value=!1,S),S=>{throw i.value=!1,S})}}}const $=je(!1);$.withControlled=je(!0);function Ue(l,r){const o=s.value.findIndex(p=>p.path===l),f=s.value[o];if(!(o===-1||!f)){if(ce(()=>{de(l,{mode:"silent",warn:!1})}),f.multiple&&f.fieldsCount&&f.fieldsCount--,Array.isArray(f.id)){const p=f.id.indexOf(r);p>=0&&f.id.splice(p,1),delete f.__flags.pendingUnmount[r]}(!f.multiple||f.fieldsCount<=0)&&(s.value.splice(o,1),Ze(l),b(),delete h.value[l])}}function m(l){return X(r=>{r.path.startsWith(l)&&x(r.__flags.pendingUnmount).forEach(o=>{r.__flags.pendingUnmount[o]=!0})})}const V={formId:t,values:d,controlledValues:T,errorBag:q,errors:_,schema:z,submitCount:c,meta:U,isSubmitting:i,isValidating:u,fieldArrays:v,keepValuesOnUnmount:Q,validateSchema:A(z)?J:void 0,validate:ye,setFieldError:g,validateField:de,setFieldValue:F,setValues:te,setErrors:w,setFieldTouched:Ee,setTouched:Te,resetForm:Re,resetField:Qe,handleSubmit:$,stageInitialValue:Mn,unsetInitialValue:Ze,setFieldInitialValue:De,useFieldModel:ae,createPathState:ne,getPathState:P,unsetPathValue:ge,removePathState:Ue,initialValues:Z,getAllPathStates:()=>s.value,markForUnmount:m,isFieldTouched:kn,isFieldDirty:Cn,isFieldValid:wn};function F(l,r,o=!0){const f=I(r),p=typeof l=="string"?l:l.path;P(p)||ne(p),fe(d,p,f),o&&de(p)}function C(l,r=!0){x(d).forEach(o=>{delete d[o]}),x(l).forEach(o=>{F(o,l[o],!1)}),r&&ye()}function te(l,r=!0){ke(d,l),v.forEach(o=>o&&o.reset()),r&&ye()}function re(l){const r=P(A(l))||ne(l);return E({get(){return r.value},set(o){const f=A(l);F(f,o,!1),r.validated=!0,r.pending=!0,de(f).then(()=>{r.pending=!1})}})}function ae(l){return Array.isArray(l)?l.map(re):re(l)}function Ee(l,r){const o=P(l);o&&(o.touched=r)}function kn(l){var r;return!!(!((r=P(l))===null||r===void 0)&&r.touched)}function Cn(l){var r;return!!(!((r=P(l))===null||r===void 0)&&r.dirty)}function wn(l){var r;return!!(!((r=P(l))===null||r===void 0)&&r.valid)}function Te(l){if(typeof l=="boolean"){X(r=>{r.touched=l});return}x(l).forEach(r=>{Ee(r,!!l[r])})}function Qe(l,r){var o;const f=r&&"value"in r?r.value:W(Z.value,l),p=P(l);p&&(p.__flags.pendingReset=!0),De(l,I(f)),F(l,f,!1),Ee(l,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),g(l,(r==null?void 0:r.errors)||[]),ce(()=>{p&&(p.__flags.pendingReset=!1)})}function Re(l,r){let o=l!=null&&l.values?l.values:N.value;o=oe(z)&&R(z.cast)?z.cast(o):o,le(o),X(f=>{var p;f.__flags.pendingReset=!0,f.validated=!1,f.touched=((p=l==null?void 0:l.touched)===null||p===void 0?void 0:p[f.path])||!1,F(f.path,W(o,f.path),!1),g(f.path,void 0)}),r!=null&&r.force?C(o,!1):te(o,!1),w((l==null?void 0:l.errors)||{}),c.value=(l==null?void 0:l.submitCount)||0,ce(()=>{ye({mode:"silent"}),X(f=>{f.__flags.pendingReset=!1})})}async function ye(l){const r=(l==null?void 0:l.mode)||"force";if(r==="force"&&X(O=>O.validated=!0),V.validateSchema)return V.validateSchema(r);u.value=!0;const o=await Promise.all(s.value.map(O=>O.validate?O.validate(l).then(S=>({key:O.path,valid:S.valid,errors:S.errors})):Promise.resolve({key:O.path,valid:!0,errors:[]})));u.value=!1;const f={},p={};for(const O of o)f[O.key]={valid:O.valid,errors:O.errors},O.errors.length&&(p[O.key]=O.errors[0]);return{valid:o.every(O=>O.valid),results:f,errors:p}}async function de(l,r){var o;const f=P(l);if(f&&(r==null?void 0:r.mode)!=="silent"&&(f.validated=!0),z){const{results:p}=await J((r==null?void 0:r.mode)||"validated-only");return p[l]||{errors:[],valid:!0}}return f!=null&&f.validate?f.validate(r):(!f&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function Ze(l){un(Z.value,l)}function Mn(l,r,o=!1){De(l,r),fe(d,l,r),o&&!(e!=null&&e.initialValues)&&fe(N.value,l,I(r))}function De(l,r){fe(Z.value,l,I(r))}async function en(){const l=A(z);if(!l)return{valid:!0,results:{},errors:{}};u.value=!0;const r=we(l)||oe(l)?await Bt(l,d):await It(l,d,{names:G.value,bailsMap:D.value});return u.value=!1,r}const Bn=$((l,{evt:r})=>{yt(r)&&r.target.submit()});mn(()=>{if(e!=null&&e.initialErrors&&w(e.initialErrors),e!=null&&e.initialTouched&&Te(e.initialTouched),e!=null&&e.validateOnMount){ye();return}V.validateSchema&&V.validateSchema("silent")}),Se(z)&&ue(z,()=>{var l;(l=V.validateSchema)===null||l===void 0||l.call(V,"validated-only")}),hn(Xe,V);function In(l,r){const o=P(B(l))||ne(l),f=()=>R(r)?r(Ve(o,Oe)):r||{};function p(){var M;o.touched=!0,((M=f().validateOnBlur)!==null&&M!==void 0?M:ie().validateOnBlur)&&de(o.path)}function O(M){var j;const k=(j=f().validateOnModelUpdate)!==null&&j!==void 0?j:ie().validateOnModelUpdate;F(o.path,M,k)}return E(()=>{if(R(r)){const k=r(o),K=k.model||"modelValue";return Object.assign({onBlur:p,[K]:o.value,[`onUpdate:${K}`]:O},k.props||{})}const M=(r==null?void 0:r.model)||"modelValue",j={onBlur:p,[M]:o.value,[`onUpdate:${M}`]:O};return r!=null&&r.mapProps?Object.assign(Object.assign({},j),r.mapProps(Ve(o,Oe))):j})}function Nn(l,r){const o=P(B(l))||ne(l),f=()=>R(r)?r(Ve(o,Oe)):r||{};function p(){var j;o.touched=!0,((j=f().validateOnBlur)!==null&&j!==void 0?j:ie().validateOnBlur)&&de(o.path)}function O(j){var k;const K=Me(j),pe=(k=f().validateOnInput)!==null&&k!==void 0?k:ie().validateOnInput;F(o.path,K,pe)}function S(j){var k;const K=Me(j),pe=(k=f().validateOnChange)!==null&&k!==void 0?k:ie().validateOnChange;F(o.path,K,pe)}return E(()=>{const j={value:o.value,onChange:S,onInput:O,onBlur:p};return R(r)?Object.assign(Object.assign({},j),r(Ve(o,Oe)).attrs||{}):r!=null&&r.mapAttrs?Object.assign(Object.assign({},j),r.mapAttrs(Ve(o,Oe))):j})}return Object.assign(Object.assign({},V),{values:Hn(d),handleReset:()=>Re(),submitForm:Bn,defineComponentBinds:In,defineInputBinds:Nn})}function xt(e,n,t,a){const i={touched:"some",pending:"some",valid:"every"},u=E(()=>!H(n,A(t)));function c(){const d=e.value;return x(i).reduce((s,y)=>{const h=i[y];return s[y]=d[h](b=>b[y]),s},{})}const v=Fe(c());return Wn(()=>{const d=c();v.touched=d.touched,v.valid=d.valid,v.pending=d.pending}),E(()=>Object.assign(Object.assign({initialValues:A(t)},v),{valid:v.valid&&!x(a.value).length,dirty:u.value}))}function Jt(e,n,t){const a=Fn(t),i=t==null?void 0:t.initialValues,u=L(a),c=L(I(a));function v(d,s=!1){u.value=ke(I(u.value)||{},I(d)),c.value=ke(I(c.value)||{},I(d)),s&&e.value.forEach(y=>{if(y.touched)return;const b=W(u.value,y.path);fe(n,y.path,I(b))})}return Se(i)&&ue(i,d=>{d&&v(d,!0)},{deep:!0}),{initialValues:u,originalInitialValues:c,setInitialValues:v}}const nr=yn({__name:"SmartForm",props:{fields:{default:()=>[]}},setup(e){const n=Pe("form",L()),t=Pe("initalValues",L({})),a=Pe("loading",L(!1));Pt({validateOnBlur:!1});const i=e,u=s=>s.props||{},c=s=>s.events||{},v=s=>typeof s.key=="function"?s.key():s.key,d=E(()=>{const s=i.fields.reduce((y,h)=>{const b=typeof h.key=="function"?h.key():h.key;return h.rule&&(y[b]=h.rule),y},{});return et(s)});return n.value||(n.value=Xt({validationSchema:d,initialValues:t.value})),(s,y)=>(ze(),nn(tt,null,{default:tn(()=>[(ze(!0),Zn(Yn,null,Qn(s.fields,(h,b)=>Jn(s.$slots,h.key,{key:`${b}-${h.key}`},()=>[vn(A(qt),{name:v(h)},{default:tn(({value:g,handleChange:w,errors:q})=>[(ze(),nn(gn(h.component),xn({class:"mb-2","model-value":g,loading:A(a),"onUpdate:modelValue":w,"error-messages":q},u(h),Xn(c(h))),null,16,["model-value","loading","onUpdate:modelValue","error-messages"]))]),_:2},1032,["name"])])),128))]),_:3}))}});export{nr as default};
