import{l as h}from"./lodash.js";import{s as P}from"./VAvatar.js";import{_ as k}from"./_plugin-vue_export-helper.js";import{o as s,c as g,P as o,x as i,Q as l,ai as p,aj as $,ak as B,r as V,ad as d,ae as _,a4 as m}from"./vuetify.js";import{V as x}from"./VImg.js";import{V as S,a as w,b as y,c as v}from"./VRow.js";const I={props:["item"],data:()=>({}),computed:{previewImage(){var a,e;const t=(e=(a=this.item)==null?void 0:a.images)==null?void 0:e.find(({pivot:c})=>c.value==="preview");return t?t.path:""}}},b={class:"card--content"};function E(t,a,e,c,C,n){return s(),g(S,$(B(t.$attrs)),{default:o(()=>[i(x,{src:n.previewImage,class:"black--text align-end","min-height":"250px","max-height":"500px",cover:""},{default:o(()=>[l("div",b,[l("div",null,[l("h2",null,p(e.item.price)+" ₽",1),l("span",null,p(e.item.weight)+" г.",1)]),l("h3",null,p(e.item.title),1)])]),_:1},8,["src"])]),_:1},16)}const M=k(I,[["render",E],["__scopeId","data-v-8789f124"]]),N={components:{ProductCard:M},data:()=>({items:[],meals:[],loading:!1}),methods:{sortBy:h.sortBy,async getItems(t){try{this.loading=!0;const{data:a}=await P.get("/category",{params:{slug:t}});this.items=a.flatMap(({children:e,meals:c})=>(this.meals=h.sortBy(c,"order"),e))}catch(a){console.log(a)}finally{this.loading=!1}},onProductClick(t){this.$router.push({name:"Product",params:{productSlug:t.slug,categorySlug:this.$route.params.categorySlug}})}},computed:{slug(){return this.$route.params.categorySlug}},beforeMount(){this.getItems(this.slug)}},R={class:"mb-6"};function j(t,a,e,c,C,n){const f=V("product-card");return s(),g(w,{fluid:""},{default:o(()=>[i(y,{class:"mb-2"},{default:o(()=>[(s(!0),d(m,null,_(t.meals,r=>(s(),g(v,{lg:"4",sm:"6",cols:"6",key:r.id},{default:o(()=>[i(f,{id:r.slug,item:r,to:{name:"Product",params:{productSlug:r.slug,categorySlug:t.$route.params.categorySlug}}},null,8,["id","item","to"])]),_:2},1024))),128))]),_:1}),(s(!0),d(m,null,_(n.sortBy(t.items,"order"),r=>(s(),d(m,{key:r.id},[l("h1",R,p(r.title),1),i(y,null,{default:o(()=>[(s(!0),d(m,null,_(n.sortBy(r.meals,"order"),u=>(s(),g(v,{lg:"4",sm:"6",cols:"6",key:u.id},{default:o(()=>[i(f,{id:u.slug,item:u,onClick:z=>n.onProductClick(u)},null,8,["id","item","onClick"])]),_:2},1024))),128))]),_:2},1024)],64))),128))]),_:1})}const G=k(N,[["render",j]]);export{G as default};
